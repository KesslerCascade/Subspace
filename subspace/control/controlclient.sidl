#include "control.h"
#include "subspace.h"
#include <cx/thread/prqueue.h>

[methodprefix cclient] class ControlClient
{
    Subspace *subspace;
    ControlState state;
    PrQueue outbound;

    void queue(ControlMsg *msg);
    void send();
    void recv();
    unbound socket_t sock();
    unbound bool closed();
    unbound bool sendPending();

    init();
    destroy();
    factory create(Subspace *ss, socket_t sock);
}